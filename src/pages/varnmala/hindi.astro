---
import "@/assets/styles/varnmala/alphabet.css";
import BaseLayout from "@/layouts/Base";

import AlphabetComponent from "@/components/Alphabet.astro";
import Help from "@/components/Help.astro";
import BackButton from "@/components/ui/backButton.astro";

// Imported consonants and the vowel list
import { varnmala_hindi, hindiVowelList } from "@/utils/characters";

// Vowels to be excluded
const vowelsToRemove = ["ऌ", "ऎ", "ऒ"];

// Prepare the vowel data for the AlphabetComponent, filtering out the unwanted vowels
const formattedVowelList = hindiVowelList
  .filter((vowel) => !vowelsToRemove.includes(vowel.value))
  .map((vowel) => ({
    letter: vowel.value, // Using the 'value' property which holds the character
    code: vowel.key // Using the 'key' property for the 'code'
  }));
---

<BaseLayout meta={{ title: "Hindi" }}>
  <Fragment slot="header-right">
    <Help
      title="Hindi"
      description="It is a collection of alphabets in Hindi. It is used to teach kids the basics of language."
    />
  </Fragment>
  <BackButton />

  <article class="container__alphabets">
    {/* Section for Hindi Vowels */}
    <section id="hindi_vowels">
      {}
      <AlphabetComponent list={formattedVowelList} title="Hindi Vowels (स्वर)" />
    </section>

    {/* Section for Hindi Consonants */}
    <section id="hindi_consonants">
      {}
      <AlphabetComponent list={varnmala_hindi} title="Hindi Consonants (व्यंजन)" />
    </section>
  </article>
  <script>
    const tabs = document.querySelectorAll(".tab");

    tabs.forEach((tab) => {
      tab.addEventListener("click", () => {
        // Remove active class from all tabs
        tabs.forEach((t) => t.classList.remove("active"));

        // Add active class to clicked tab
        tab.classList.add("active");

        // Scroll to target section with offset
        const targetId = tab.getAttribute("data-target");
        if (targetId) {
          const targetSection = document.getElementById(targetId) || document.getElementById(`hindi_${targetId}`);
          if (targetSection) {
            targetSection.scrollIntoView({ behavior: "smooth" });
          }
        }
      });
    });
  </script>
</BaseLayout>
