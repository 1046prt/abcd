---
import Layout from "@/layouts/Base";
import LocationMosaic from "../components/Capitals.astro";
import { locations } from "../data/location.ts";
import Help from "@/components/Help.astro";


const meta = {
  title: "India's Geographical Mosaic",
  description: "An Interactive Journey Through India's States and Territories"
};

// Separate the states and union territories
const stateList = locations.filter((loc) => loc.isState);
const utList = locations.filter((loc) => !loc.isState);

// Generate a random color palette
const generateColorPalette = () => {
  const baseColors = [
    "#3498db",
    "#2ecc71",
    "#e74c3c",
    "#f39c12",
    "#9b59b6",
    "#1abc9c",
    "#34495e",
    "#e67e22"
  ];
  return baseColors.sort(() => 0.5 - Math.random());
};
const colorPalette = generateColorPalette();

// Helper: return a contrasting color (black or white) for a given hex color
function getContrastColor(hexColor) {
  const r = parseInt(hexColor.slice(1, 3), 16);
  const g = parseInt(hexColor.slice(3, 5), 16);
  const b = parseInt(hexColor.slice(5, 7), 16);
  const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;
  return luminance > 0.5 ? "#000000" : "#ffffff";
}
---

<Layout meta={meta}>
  <Fragment slot="header-right">
    <Help
      title="Hide & Seek Game"
      description="Press any alphabet key from keyboard and that letter will appears and when you press again then it will disappears. See some hover and active effects while hovering over each card."
    />
  </Fragment>
  <LocationMosaic
    stateList={stateList}
    utList={utList}
    colorPalette={colorPalette}
    getContrastColor={getContrastColor}
  />
</Layout>
